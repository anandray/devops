# User specific aliases and functions
# enter my scripts home
alias myscripts='cd /root/go/src/github.com/wolkdb/cloudstore/build/scripts/systems/anand/my-gce-scripts'
alias supernode='cd /root/go/src/github.com/wolkdb/cloudstore/build/scripts/supernode-scripts'

alias rm='rm -i'
alias cp='cp -i'
alias mv='mv -i'
alias vi='/usr/bin/vim'
alias ll='ls -lt'

alias bashrc='vi ~/.bashrc'
alias sourcebashrc='source ~/.bashrc'
alias watch='watch '

alias www6001='ssh -q www6001'
alias www6002='ssh -q www6002'
alias c0='ssh -q c0.wolk.com'
alias c1='ssh -q c1.wolk.com'
alias c2='ssh -q c2.wolk.com'
alias c3='ssh -q c3.wolk.com'
alias c4='ssh -q c4.wolk.com'
alias c5='ssh -q c5.wolk.com'
alias c6='ssh -q c6.wolk.com'
alias c7='ssh -q c7.wolk.com'
alias c8='ssh -q c8.wolk.com'
alias c9='ssh -q c9.wolk.com'
alias c10='ssh -q c10.wolk.com'
alias c11='ssh -q c11.wolk.com'
alias d0='ssh -q d0.wolk.com'
alias d1='ssh -q d1.wolk.com'
alias d2='ssh -q d2.wolk.com'
alias d3='ssh -q d3.wolk.com'
alias d4='ssh -q d4.wolk.com'
alias d5='ssh -q d5.wolk.com'
alias d6='ssh -q d6.wolk.com'

alias devplasma='cd ~/go/src/github.com/wolkdb/plasma/'
alias cloudstore='cd ~/go/src/github.com/wolkdb/cloudstore'

alias gitsubmodule='git submodule update --init --recursive'
alias gitupdate='git fetch origin && git merge origin/master'
alias makewolk='cd /root/go/src/github.com/wolkdb/cloudstore; git fetch origin && git merge origin/master; make wolk; cd -'
alias makewcloud='cd /root/go/src/github.com/wolkdb/cloudstore; git fetch origin && git merge origin/master; make wcloud; cd -'

# wolk
alias pushwolk='cd /root/go/src/github.com/wolkdb/cloudstore/build/bin; git add wolk; git commit -m "wolk udpate `date +%d-%m-%Y`"; git fetch origin && git merge origin/master; git push origin master; cd /root/go/src/github.com/wolkdb/cloudstore/build/scripts && ./pushwolkservice'
alias md5wolk="md5sum /root/go/src/github.com/wolkdb/cloudstore/build/bin/wolk; cat /root/go/src/github.com/wolkdb/cloudstore/build/scripts/cloudstore/hosts | awk '{print\"ssh -q\",\$1,\"cat /usr/local/wolk/host && ssh -q\",\$1,\"md5sum /root/go/src/github.com/wolkdb/cloudstore/build/bin/wolk\"}' > /tmp/md5wolk.sh && sh /tmp/md5wolk.sh"

# cloudstore
alias makecloudstore='cd /root/go/src/github.com/wolkdb/cloudstore; git fetch origin && git merge origin/master; make cloudstore; cd -'
alias pushcloudstore='cd /root/go/src/github.com/wolkdb/cloudstore/build/scripts && ./pushcloudstoreservice'

# sql

alias cpsql='"yes" | cp -rf /root/go/src/github.com/wolkdb/plasma/build/bin/sql /root/sql/bin/sql;"yes" | cp -rf /root/go/src/github.com/wolkdb/plasma/build/bin/sql /root/go/src/github.com/wolkdb/docker/docker-sql/sql/bin/;"yes" | cp -rf /root/go/src/github.com/wolkdb/plasma/build/bin/sql /root/go/src/github.com/wolkdb/docker/sql-docker/sql/bin/; scp -C -p /root/go/src/github.com/wolkdb/plasma/build/bin/sql www6001:/var/www/vhosts/mdotm.com/httpdocs/.start/sql; scp -C -p /root/go/src/github.com/wolkdb/plasma/build/bin/sql www6001:/root/go/src/github.com/wolkdb/plasma/build/bin/sql'

alias makesql='cd /root/go/src/github.com/wolkdb/plasma; git fetch origin && git merge origin/master; make sql; "yes" | cp -rf /root/go/src/github.com/wolkdb/plasma/build/bin/sql /root/sql/bin/sql; cd -'

alias md5sql='md5sum /root/go/src/github.com/wolkdb/plasma/build/bin/sql; md5sum /root/sql/bin/sql; md5sum /root/go/src/github.com/wolkdb/docker/docker-sql/sql/bin/sql; md5sum /root/go/src/github.com/wolkdb/docker/sql-docker/sql/bin/sql; ssh -q www6001 hostname && ssh -q www6001 md5sum /var/www/vhosts/mdotm.com/httpdocs/.start/sql; ssh -q www6001 hostname && ssh -q www6001 md5sum /root/go/src/github.com/wolkdb/plasma/build/bin/sql'

# nosql
alias cpnosql='"yes" | cp -rf /root/go/src/github.com/wolkdb/plasma/build/bin/nosql /root/nosql/bin/nosql; "yes" | cp -rf /root/go/src/github.com/wolkdb/plasma/build/bin/nosql /root/go/src/github.com/wolkdb/docker/docker-nosql/nosql/bin/; scp -C -p /root/go/src/github.com/wolkdb/plasma/build/bin/nosql www6001:/var/www/vhosts/mdotm.com/httpdocs/.start/nosql; scp -C -p /root/go/src/github.com/wolkdb/plasma/build/bin/nosql www6001:/root/go/src/github.com/wolkdb/plasma/build/bin/nosql'

alias makenosql='cd /root/go/src/github.com/wolkdb/plasma; git fetch origin && git merge origin/master; make nosql; "yes" | cp -rf /root/go/src/github.com/wolkdb/plasma/build/bin/nosql /root/nosql/bin/nosql; cd -'

alias md5nosql='md5sum /root/go/src/github.com/wolkdb/plasma/build/bin/nosql; md5sum /root/nosql/bin/nosql;md5sum /root/go/src/github.com/wolkdb/docker/docker-nosql/nosql/bin/nosql; ssh -q www6001 hostname && ssh -q www6001 md5sum /var/www/vhosts/mdotm.com/httpdocs/.start/nosql; ssh -q www6001 hostname && ssh -q www6001 md5sum /root/go/src/github.com/wolkdb/plasma/build/bin/nosql'

# plasma
alias makeplasma='cd /root/go/src/github.com/wolkdb/plasma; git fetch origin && git merge origin/master; make plasma; "yes" | cp -rf /root/go/src/github.com/wolkdb/plasma/build/bin/plasma /root/plasma/bin/plasma; cd -'

alias cpplasma='"yes" | cp -rf /root/go/src/github.com/wolkdb/plasma/build/bin/plasma /root/plasma/bin/plasma; "yes" | cp -rf /root/go/src/github.com/wolkdb/plasma/build/bin/plasma /root/go/src/github.com/wolkdb/docker/docker-plasma/plasma/bin/; scp -C -p /root/go/src/github.com/wolkdb/plasma/build/bin/plasma www6001:/var/www/vhosts/mdotm.com/httpdocs/.start/plasma;'

alias md5plasma='md5sum /root/go/src/github.com/wolkdb/plasma/build/bin/plasma; md5sum /root/plasma/bin/plasma; md5sum /root/go/src/github.com/wolkdb/docker/docker-plasma/plasma/bin/plasma; ssh -q www6001 hostname && ssh -q www6001 md5sum /var/www/vhosts/mdotm.com/httpdocs/.start/plasma'

# go-plasma
alias makegoplasma='cd /root/go/src/github.com/wolkdb/go-plasma; git fetch origin && git merge origin/master; make plasma; "yes" | cp -rf /root/go/src/github.com/wolkdb/go-plasma/build/bin/plasma /root/go-plasma/bin/plasma; cd -'

alias cpgoplasma='"yes" | cp -rf /root/go/src/github.com/wolkdb/go-plasma/build/bin/plasma /root/go-plasma/bin/plasma; "yes" | cp -rf /root/go/src/github.com/wolkdb/go-plasma/build/bin/plasma /root/go/src/github.com/wolkdb/docker/docker-go-plasma/plasma/bin/; scp -C -p /root/go/src/github.com/wolkdb/go-plasma/build/bin/plasma www6001:/var/www/vhosts/mdotm.com/httpdocs/.start/go-plasma;'

alias md5goplasma='md5sum /root/go/src/github.com/wolkdb/go-plasma/build/bin/plasma; md5sum /root/go-plasma/bin/plasma; md5sum /root/go/src/github.com/wolkdb/docker/docker-go-plasma/plasma/bin/plasma; ssh -q www6001 hostname && ssh -q www6001 md5sum /var/www/vhosts/mdotm.com/httpdocs/.start/go-plasma'

# Michael
# error flagging
#trap 'PREVIOUS_COMMAND=$THIS_COMMAND; THIS_COMMAND=$BASH_COMMAND' DEBUG
#read -r -d '' PROMPT_COMMAND << 'END'
#    if [ $? = 0 -o $? == 130 -o "$PREVIOUS_COMMAND" = ": noop" ]; then
#        PS1="\\[\033[38;5;103m\]\t \\[\033[38;5;0m\]\u\\[\033[38;5;0m\]@\\[\033[38;5;0m\]\h \\[\033[38;5;0m\]\W~\\$ \[$(tput sgr0)\]"
#    else
#        PS1="\\[\033[38;31;1m\]ERROR\n\\[\033[m\\[\033[38;5;103m\]\t \\[\033[38;5;0m\]\u\\[\033[38;5;0m\]@\\[\033[38;5;0m\]\h \\[\033[38;5;0m\]\W~\\$ \[$(tput sgr0)\]"
#    fi
#    : noop
#END

_getll() {
find ${1:-$PWD}  -maxdepth ${3:-1}  -type f | xargs stat --format '%Y %s %n %y' 2>/dev/null | rev | cut -d'.' -f1  --complement | rev |  sort -${2:-nr} |
awk 'function human(x) {
         s=" B   KBB MBB GBB TBB EBB PBB YBB ZBB"
         while (x>=1024 && length(s)>1) 
               {x/=1024; s=substr(s,5)}
         s=substr(s,1,3)
         xf=(s==" B ")?"   %4d":"%7.2f"
         return sprintf( xf"%s", x, s)
      }
      { print human($2) " " "\[" $4 " "$5 "\]" " " $3}' 2>/dev/null
}
alias ld='_getll'

_getls() {
find ${1:-*} -maxdepth ${3:-1} -type f | xargs stat --format '%n %Y %s %y' 2>/dev/null | rev | cut -d'.' -f1  --complement | rev | sort -${2:-f} | awk 'function human(x) {
         s=" B   KBB MBB GBB TBB EBB PBB YBB ZBB"
         while (x>=1024 && length(s)>1) 
               {x/=1024; s=substr(s,5)}
         s=substr(s,1,3)
         xf=(s==" B ")?"   %4d":"%7.2f"
         return sprintf( xf"%s", x, s)
      }
      { print human($3) " " "\[" $4 " "$5 "\]" " " $1}' 2>/dev/null
}
alias l='_getls'

_gitCommit() {
git commit -m "Michael: ${1:-fix}"
}
alias gcommit='_gitCommit'

alias showpath='echo -e ${PATH//:/\\n}'

# Alina
function repo_modified {
if [[ -z `git status | grep -o "nothing to commit"` ]]; then
echo "*"
fi
}

function parse_git_branch {
ref=$(git symbolic-ref HEAD 2> /dev/null) || return
echo "("${ref#refs/heads/}`repo_modified`")"
}

#PS1="[\h:\W \D{%d.%T} \$(parse_git_branch)] "

export CLICOLOR=1
export LSCOLORS=ExFxBxDxCxegedabagacad

alias lsall='ls -Fha'
